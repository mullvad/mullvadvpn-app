import { messages } from '../../../../../../../../shared/gettext';
import { FlexRow } from '../../../../../../../lib/components/flex-row';
import InfoButton from '../../../../../../InfoButton';
import { ModalMessage } from '../../../../../../Modal';
import { SettingsToggleListItem } from '../../../../../../settings-toggle-list-item';
import { useDns } from '../../hooks';

export function BlockMalwareSetting() {
  const [dns, setBlockMalware] = useDns('blockMalware');

  return (
    <SettingsToggleListItem
      level={1}
      animation={false}
      disabled={dns.state === 'custom'}
      checked={dns.state === 'default' && dns.defaultOptions.blockMalware}
      onCheckedChange={setBlockMalware}>
      <FlexRow $padding={{ left: 'medium' }}>
        <SettingsToggleListItem.Label variant="bodySmall">
          {
            // TRANSLATORS: Label for settings that enables malware blocking.
            messages.pgettext('vpn-settings-view', 'Malware')
          }
        </SettingsToggleListItem.Label>
      </FlexRow>
      <SettingsToggleListItem.Group>
        <InfoButton>
          <ModalMessage>
            {messages.pgettext(
              'vpn-settings-view',
              'Warning: The malware blocker is not an anti-virus and should not be treated as such, this is just an extra layer of protection.',
            )}
          </ModalMessage>
        </InfoButton>
        <SettingsToggleListItem.Switch />
      </SettingsToggleListItem.Group>
    </SettingsToggleListItem>
  );
}
