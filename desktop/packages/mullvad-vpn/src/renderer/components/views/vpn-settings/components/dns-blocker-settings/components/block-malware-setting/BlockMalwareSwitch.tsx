import { useDns } from '../../../../../../../features/dns/hooks';
import { Switch, SwitchProps } from '../../../../../../../lib/components/switch';

export type BlockMalwareSwitchProps = SwitchProps;

function BlockMalwareSwitch({ children, ...props }: BlockMalwareSwitchProps) {
  const [dns, setBlockMalware] = useDns('blockMalware');

  return (
    <Switch
      disabled={dns.state === 'custom'}
      checked={dns.state === 'default' && dns.defaultOptions.blockMalware}
      onCheckedChange={setBlockMalware}
      {...props}>
      {children}
    </Switch>
  );
}

const BlockMalwareSwitchNamespace = Object.assign(BlockMalwareSwitch, {
  Label: Switch.Label,
  Thumb: Switch.Thumb,
  Trigger: Switch.Trigger,
});

export { BlockMalwareSwitchNamespace as BlockMalwareSwitch };
