[package]
name = "mullvad-ios"
description = "Entry point for all FFI code on iOS"
authors.workspace = true
repository.workspace = true
license.workspace = true
edition.workspace = true
rust-version.workspace = true

[lints]
workspace = true

[features]
# Allow the API server to be used
api-override = ["mullvad-api/api-override"]

[target.'cfg(target_os = "ios")'.dependencies]
async-trait = "0.1"
futures = { workspace = true }
hyper = { version = "1.4.1", features = ["client", "http1"] }
hyper-util = { workspace = true }
ipnetwork = { workspace = true }
libc = "0.2"
log = { workspace = true }
mockito = "1.6.1"
mullvad-api = { path = "../mullvad-api", default-features = false }
mullvad-encrypted-dns-proxy = { path = "../mullvad-encrypted-dns-proxy" }
mullvad-types = { path = "../mullvad-types" }
oslog = "0.2"
serde_json = { workspace = true }
talpid-future = { path = "../talpid-future" }
talpid-tunnel-config-client = { path = "../talpid-tunnel-config-client" }
talpid-types = { path = "../talpid-types" }
tokio = { workspace = true, features = ["macros", "rt-multi-thread"] }
tonic = { workspace = true }
tower = { workspace = true }
tun07 = { package = "tun", version = "0.7.11", features = [
  "async",
]}
tunnel-obfuscation = { path = "../tunnel-obfuscation" }
shadowsocks-service = { workspace = true, features = [
    "local",
    "stream-cipher",
    "local-http",
    "local-tunnel",
] }

[dependencies.boringtun]
git = "https://github.com/mullvad/gotatun"
rev = "d8ddd4232c9636aa98ab4bd14093e256f7d09abb"
features = [ "device", "tun" ]

[target.'cfg(target_os = "macos")'.build-dependencies]
cbindgen = { version = "0.28.0", default-features = false }

[lib]
crate-type = ["staticlib"]
bench = false
